<h1>Welcome!</h1>
<form [formGroup]="registrationForm" (ngSubmit)="onSubmit(registrationForm.value)">
    <div class="form-group">
        <label for="nameInput">Name</label>
        <input formControlName="name" type="text" class="form-control" id="nameInput" placeholder="Enter your name">
    </div>

    <div class="form-group">
        <label for="roleInput">Role</label>
        <select formControlName="role" class="form-control" id="roleInput" (change)="roleChange()">
            <option disabled selected value="">Select your role</option>
            <option value="0">Participant</option>
            <option value="1">Spectator</option>
            <option value="2">Dealer</option>
        </select>
    </div>

    <div *ngIf="registrationForm.get('role').valid" class="form-group">
        <label for="groupInput">{{ dealerSelected ? 'New group name' : 'Group to join' }}</label>
        <input formControlName="group" type="text" class="form-control" id="groupInput"
            [placeholder]="dealerSelected ? 'Enter a group name' : 'Enter the group id'">
        <div *ngIf="dealerSelected" class="mt-2">
            <button [disabled]="registrationForm.get('group').invalid || (room$ | async)"
                class="btn btn-primary" type="button" (click)="createRoom()">
                Create room
            </button>
            <span class="ml-2" *ngIf="(room$ | async)">âœ“</span>
        </div>
    </div>

    <div class="form-group d-flex mt-4"
        [ngClass]="{'disabled': registrationForm.invalid || (loading$ | async)}">
        <button *ngIf="!dealerSelected" type="submit" class="btn btn-primary"
            [disabled]="registrationForm.invalid || (loading$ | async)">
            Join the game!
        </button>
        <button *ngIf="dealerSelected" type="submit" class="btn btn-primary"
            [disabled]="registrationForm.invalid || (loading$ | async) || !(room$ | async)">
            Start a new game!
        </button>
        <div *ngIf="(loading$ | async)" class="spinner-border ml-2" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</form>